(function() {
    // Verify URL parameter again for security
    const u = new URLSearchParams(window.location.search);
    if (u.get('source') !== 'tiktok') return;
    
    // Additional referrer check
    if (!document.referrer) return;
    
    try {
      const d = atob('PHN0eWxlPgogICAgICBAa2V5ZnJhbWVzIHNsaWRlSW4gewogICAgICAgIGZyb20geyBvcGFjaXR5OiAwOyB0cmFuc2Zvcm06IHNjYWxlKDAuOCk7IH0KICAgICAgICB0byB7IG9wYWNpdHk6IDE7IHRyYW5zZm9ybTogc2NhbGUoMSk7IH0KICAgICAgfQogICAgPC9zdHlsZT48ZGl2IHN0eWxlPSIKICAgICAgcG9zaXRpb246IGZpeGVkOyAKICAgICAgdG9wOiAwOyAKICAgICAgbGVmdDogMDsgCiAgICAgIHdpZHRoOiAxMDAlOyAKICAgICAgaGVpZ2h0OiAxMDAlOyAKICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzAwMCAwJSwgI2ZmMDA1MCA1MCUsICNmZjZiMzUgMTAwJSk7IAogICAgICBjb2xvcjogd2hpdGU7IAogICAgICB6LWluZGV4OiA5OTk5OTk7IAogICAgICBkaXNwbGF5OiBmbGV4OyAKICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsgCiAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOyAKICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgICAgYW5pbWF0aW9uOiBzbGlkZUluIDAuNXMgZWFzZS1vdXQ7CiAgICAiPgogICAgICA8ZGl2IHN0eWxlPSIKICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LDAuMSk7IAogICAgICAgIHBhZGRpbmc6IDUwcHg7IAogICAgICAgIGJvcmRlci1yYWRpdXM6IDI1cHg7IAogICAgICAgIGJhY2tkcm9wLWZpbHRlcjogYmx1cigxNXB4KTsgCiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICAgIG1heC13aWR0aDogNTAwcHg7CiAgICAgICAgbWFyZ2luOiAyMHB4OwogICAgICAiPgogICAgICAgIDxoMSBzdHlsZT0iZm9udC1zaXplOiAzcmVtOyBtYXJnaW4tYm90dG9tOiAyMHB4OyI+8J+OiSBPRkVSVEEgRVhDTFVTSVZBITwvaDE+CiAgICAgICAgPHAgc3R5bGU9ImZvbnQtc2l6ZTogMS4zcmVtOyBtYXJnaW4tYm90dG9tOiAzMHB4OyI+Vm9jw6ogdmVpbyBkbyBUaWtUb2sgZSB0ZW0gdW1hIG9mZXJ0YSBlc3BlY2lhbCE8L3A+CiAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLWJvdHRvbTogMzBweDsiPgogICAgICAgICAgPGRpdiBzdHlsZT0iZm9udC1zaXplOiAycmVtOyBmb250LXdlaWdodDogYm9sZDsgY29sb3I6ICNmZmZmMDA7Ij41MCUgT0ZGPC9kaXY+CiAgICAgICAgICA8ZGl2IHN0eWxlPSJ0ZXh0LWRlY29yYXRpb246IGxpbmUtdGhyb3VnaDsgb3BhY2l0eTogMC43OyI+UiQgMTk3PC9kaXY+CiAgICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXNpemU6IDEuNXJlbTsgZm9udC13ZWlnaHQ6IGJvbGQ7Ij5SJCA5NzwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxidXR0b24gb25jbGljaz0id2luZG93Lm9wZW4oJ2h0dHBzOi8vY2hlY2tvdXQuY29tL29mZXJ0YS10aWt0b2snLCAnX2JsYW5rJykiIAogICAgICAgICAgICAgICAgc3R5bGU9InBhZGRpbmc6IDIwcHggNDBweDsgYmFja2dyb3VuZDogI2ZmMDA1MDsgY29sb3I6IHdoaXRlOyBib3JkZXI6IG5vbmU7IGJvcmRlci1yYWRpdXM6IDE1cHg7IGN1cnNvcjogcG9pbnRlcjsgZm9udC1zaXplOiAxLjJyZW07IGZvbnQtd2VpZ2h0OiBib2xkOyI+CiAgICAgICAgICDwn5qAIFFVRVJPIEEgT0ZFUlRBIQogICAgICAgIDwvYnV0dG9uPgogICAgICAgIDxicj48YnI+CiAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJ0aGlzLmNsb3Nlc3QoJ2RpdltzdHlsZSo9Zml4ZWRdJykucmVtb3ZlKCkiIAogICAgICAgICAgICAgICAgc3R5bGU9InBhZGRpbmc6IDEwcHggMjBweDsgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7IGNvbG9yOiB3aGl0ZTsgYm9yZGVyOiAxcHggc29saWQgd2hpdGU7IGJvcmRlci1yYWRpdXM6IDhweDsgY3Vyc29yOiBwb2ludGVyOyI+CiAgICAgICAgICDinJUgRmVjaGFyCiAgICAgICAgPC9idXR0b24+CiAgICAgIDwvZGl2PgogICAgPC9kaXY+PHNjcmlwdD4KICAgICAgLy8gQW5hbHl0aWNzIHBhcmEgdmlzaXRhbnRlcyBkbyBUaWtUb2sKICAgICAgY29uc29sZS5sb2coJ1Rpa1RvayB2aXNpdG9yIGRldGVjdGVkIScpOwogICAgICAKICAgICAgaWYgKHR5cGVvZiBndGFnICE9PSAndW5kZWZpbmVkJykgewogICAgICAgIGd0YWcoJ2V2ZW50JywgJ3Rpa3Rva19zcGVjaWFsX3ZpZXcnLCB7CiAgICAgICAgICBldmVudF9jYXRlZ29yeTogJ3NwZWNpYWxfb2ZmZXInLAogICAgICAgICAgZXZlbnRfbGFiZWw6ICd0aWt0b2tfZXhjbHVzaXZlJwogICAgICAgIH0pOwogICAgICB9CiAgICA8L3NjcmlwdD4=');
      const c = decodeURIComponent(escape(d));
      
      const e = document.createElement('div');
      e.innerHTML = c;
      document.body.appendChild(e);
    } catch(e) {
      // Silent fail - no traces
    }
  })();
